---
import DocFor from "./DocFor.astro";

export interface Props {
    data?: any;
    parent?: string;
    depth?: number;
    divider?: boolean;
}

const { data, parent, depth = 0, divider = true } = Astro.props;

const extraProps = {
    "data-doc-entry-children": true,
};

const EntryEl = depth > 0 ? "section" : "article";
const props = parent ? extraProps : {};
const parentText = parent ? `${parent}-` : "";
---

<EntryEl
    id={`${parentText}${data?.name ?? ""}`}
    data-dg-entry
    data-doc-entry
    data-depth={depth}
    data-doc-entry-name={data?.name ?? ""}
    class:list={[
        "text-fira",
        {
            "py-2 pl-4": depth == 1,
        },
    ]}
    {...props}
>
    <DocFor data={data} depth={depth} />
    {depth > 0 && divider && <div class="divider my-0" />}
</EntryEl>
