---
import DocFor from "./DocFor.astro";

export interface Props {
    data?: any;
    parent?: string;
    depth?: number;
}

const { data, parent, depth = 0 } = Astro.props;

const optionalMark = (data: any) => {
    return data?.questionToken ? "?" : "";
};

const parentText = parent ? `${parent}-` : "";
const Title = parent ? "h2" : "h1";

const extraProps = {
    "data-doc-entry-children": true,
};

const props = parent ? extraProps : {};
const EntryEl = depth > 0 ? "section" : "article";
---

<EntryEl
    id={`${parentText}${data?.name ?? ""}`}
    data-doc-entry
    data-depth={depth}
    data-doc-entry-name={data?.name ?? ""}
    class:list={[
        "text-fira",
        {
            "py-2 pl-4": depth == 1,
        },
    ]}
    {...props}
>
    <DocFor data={data} depth={depth} />
    {depth > 0 && <div class="divider my-0" />}
</EntryEl>
