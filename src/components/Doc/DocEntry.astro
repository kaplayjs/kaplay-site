---
import DocFor from "./DocFor.astro";

export interface Props {
    data?: any;
    parent?: string;
    depth?: number;
    divider?: boolean;
}

const { data, parent, depth = 0, divider = true } = Astro.props;

const extraProps = {
    "data-doc-entry-children": true,
};

const EntryEl = depth > 0 ? "section" : "article";
const props = parent ? extraProps : {};
const parentText = parent ? `${parent}-` : "";
---

<EntryEl
    id={`${parentText}${data?.name ?? ""}`}
    data-dg-entry
    data-doc-entry
    data-depth={depth}
    data-doc-entry-name={data?.name ?? ""}
    class:list={[
        "group font-code [&+[data-depth='0']]:mt-8",
        {
            "py-3 pl-4 border-l border-base-content/10": depth == 1,
            "": depth > 0 && divider,
        },
    ]}
    {...props}
>
    <DocFor data={data} depth={depth} parent={parent} />
    {depth > 0 && divider && <div class="divider [section:last-child_&]:hidden before:h-px after:h-px mt-2 [p+&]:mt-0 -mb-3" />}
</EntryEl>
