---
import searchIcon from "@/assets/search.png";
---

<dialog id="search-modal" class="modal p-4">
    <div class="modal-box flex flex-col w-full max-w-2xl h-full max-h-[40rem] overflow-hidden">
        <div id="search" class="min-h-0 w-full"></div>

        <div class="flex flex-col items-center justify-center flex-1 mb-8 [.modal-box:has(ol)_&]:hidden opacity-80">
            <img src={searchIcon.src} alt="Search icon" class="h-24 object-contain pixelated grayscale opacity-30" width="96" height="96" />
            <h3 class="mt-3 font-bold text-2xl">Search entire website</h3>
            <p class="opacity-80">Start typing for the results</p>
        </div>
    </div>
    <form method="dialog" class="modal-backdrop">
        <button>close</button>
    </form>
</dialog>

<script is:inline>
    document.addEventListener("astro:page-load", () => {
        if (!document.querySelector("#search")) return;

        // @ts-ignore
        new PagefindUI({
            element: "#search",
            showSubResults: true,
            showImages: false,
        });
    });
</script>
